<!DOCTYPE html>
<html lang="en">
<head>
	<title>Calculator</title>
	<!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
	<style>
	.shadow {
		box-shadow: 0 5px 11px 0 rgba(0,0,0,.18),0 4px 15px 0 rgba(0,0,0,.15);
	}
	.input {
		background: linear-gradient(#9dd2ea, #8bceec);
	}
	
	.list-group {
		box-shadow: 0 5px 11px 0 rgba(0,0,0,.18),0 4px 15px 0 rgba(0,0,0,.15);
	}
	</style>

</head>

<body ng-app="myApp" ng-controller="namesCtrl" class="pt-100 pb-100">
	<header class="p-1 mb-2 bg-info text-white shadow">
		<div class="container">
		  <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
			<ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
			  <li><a href="index.html" class="nav-link px-2 text-white">Home(Withdrawal Benefit)</a></li>
			  <li><a href="pension.html" class="nav-link px-2 text-white">Pension Calculator</a></li>
			  <li><a href="edli2.html" class="nav-link px-2 text-white">EDLI</a></li>
			</ul>
			<h3 class="text-center">CALCULATOR</h3>
		  </div>
		</div>
	</header>
    <div class="container-fluid">
		<div class="row">
			<div class="alert alert-dismissible fade show" role="alert">
			<ul class="list-group">
				<li  class="list-group-item list-group-item-warning"><i class="bi bi-exclamation-octagon-fill"></i>
				The calculations on this page is based on the data entered by the user. 
					Hence, the same may differ with the calculations using the data from database. In case of any mismatch, the calculations using the database data will be considered final.
				
				</li>
				<li class="list-group-item list-group-item-warning" ><i class="bi bi-exclamation-octagon-fill"></i>
				The Withdrawal Benefit is only applicable only for those cases where EPS service of the member is more than 6 months and less than 9.5 years. Member may apply for SC if Service is less than 6 Month</li>
			</ul>
				<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
			</div>
		</div>
		<div class="row g-4">
			<div class="col">
				<div class="card shadow">
					<div class="card-header">Withdrawal Calculator Input</div>
					<div class="card-body">
						<form>
							<div ng-show="alert" class="warning">{{alert}}</div>
							<div class="input-group mb-3" data-bs-toggle="tooltip" data-bs-placement="top" title="Number of years of contribution before 01-09-2014">
								<span class="input-group-text col-9" id="basic-addon1">Number of Years Contribution in ceiling 6500:</span>
								<input type="number" ng-model="years1" class="form-control col-4" ng-change="update()" placeholder="years1" aria-label="years1" aria-describedby="basic-addon1">
							</div>

							<div class="input-group mb-3" data-bs-toggle="tooltip" data-bs-placement="top" title="Pay payable at cessation of membership">
								<span class="input-group-text col-9" id="basic-addon1">Wages on Exit/Date of notification in Wage Ceiling 6500: </span>
								<input type="number" ng-model="wage1" class="form-control col-4" ng-change="update()" placeholder="wage1"  aria-label="wage1" aria-describedby="basic-addon1">
							</div>
							
							<div class="input-group mb-3" data-bs-toggle="tooltip" data-bs-placement="top" title="Number of years of contribution before 01-09-2014">
								<span class="input-group-text col-9" id="basic-addon1">Number of Years Contribution in ceiling 15000:</span>
								<input type="number" ng-model="years2" class="form-control col-4" ng-change="update()" placeholder="years2" aria-label="years2" aria-describedby="basic-addon1">
							</div>
							
							<div class="input-group mb-3" data-bs-toggle="tooltip" data-bs-placement="top" title="Number of years of contribution">
								<span class="input-group-text col-9" id="basic-addon1">Wages on Date of Exit:</span>
								<input type="number" ng-model="wage2" class="form-control col-4" placeholder="wage2" ng-change="update()" aria-label="wage2" aria-describedby="basic-addon1">
							</div>
						</form>
					</div>
				</div>
			</div>
			<div class="col">
				<div class="card shadow">
					<div class="card-header d-flex justify-content-between align-items-center">Withdrawal Benefit Calculator Output : </div>
					<div class="card-body p-3">		
						<ul class="list-group mb-3">
							<li class="list-group-item list-group-item d-flex justify-content-between align-items-center">Years of Service (ceiling limit 6500) [Y1]: <span>{{years1}}</span></li>
							<li class="list-group-item list-group-item d-flex justify-content-between align-items-center">Wages at on date of notification [W1]: <span>{{wage1}}</span></li>
							<li class="list-group-item list-group-item d-flex justify-content-between align-items-center">Years of Service (ceiling limit 15000) [Y2]: <span>{{years2}}</span></li>
							<li class="list-group-item list-group-item d-flex justify-content-between align-items-center">Wages at on date of Exit [W2]: <span>{{wage2}}</span></li>
							<li class="list-group-item list-group-item d-flex justify-content-between align-items-center">Formula for Avg Wages: <span>(Y1*W1+Y2*W2)/Y1+Y2</span></li>
							<li class="list-group-item list-group-item d-flex justify-content-between align-items-center">Average Wages: <span>{{avg_wage}}</span></li>
							
							<li class="list-group-item list-group-item d-flex justify-content-between align-items-center">Proportion of wages: <span>{{ factor }}</span></li>
							<li class="list-group-item list-group-item-success d-flex justify-content-between align-items-center">Withdrawal Benefit: <span>{{ amount }}</span></li>
						</ul>
						
					</div>
					<div class="card-footer">
						<button type="button" class="btn btn-danger align-self-center" onclick="myFunction()">Download</button>
					</div>
				</div>
			</div>
		</div>
	</div>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js" type="text/javascript"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular-cookies.js" type="text/javascript"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular-route.js" type="text/javascript"></script>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
<script type="text/javascript" src="luxon.min.js"></script>
<script type="text/javascript" src="underscore-esm-min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/0.10.0/lodash.min.js"></script>
<script>
const round = (n, dp) => {
  const h = +('1'.padEnd(dp + 1, '0')) // 10 or 100 or 1000 or etc
  return Math.round(n * h) / h
}

var app = angular.module('myApp', ['ngCookies']);
app.controller('namesCtrl', ['$scope','$cookies','$cookieStore', '$http', function($scope,$cookies,$cookieStore, $http) {
	if($scope.years>9.5){
		$scope.alert = "The total years of service should be greater than 0.5 and less than 9.5"
	} else {
		$scope.alert = false;
	}
	
	$scope.years1 = 1;
	$scope.years2 = 1;
	$scope.list = [1.02, 1.99, 2.98, 3.99, 5.02, 6.07, 7.13, 8.22, 9.33];
	$scope.wage1= 6500;
	$scope.wage2= 15000;
	$scope.ceiling1= 6500;
	$scope.ceiling2= 15000;
	
	$scope.years = $scope.years1 + $scope.years2;
	val = Math.round($scope.years);
	console.log(val)
	$scope.factor = $scope.list[val-1];
	$scope.avg_wage = (($scope.years1*$scope.wage1)+($scope.years2*$scope.wage2))/$scope.years;
	$scope.amount = 0;
	
	$scope.update = function() {
		if($scope.years>9.5){
			$scope.alert = "The total years of service should be greater than 0.5 and less than 9.5"
		} else {
			$scope.alert = false;
		}
		$scope.years = $scope.years1 + $scope.years2;
		console.log("167");
		$scope.avg_wage = (($scope.years1*$scope.wage1)+($scope.years2*$scope.wage2))/$scope.years;
		console.log("169")
		val = Math.round($scope.years);
		$scope.factor = $scope.list[val-1]||0;
		$scope.amount = Math.round($scope.factor*$scope.avg_wage);
	}
	
}]);

</script>
</body>
</html>